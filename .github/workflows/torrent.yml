name: Docker Torrent Download
on:
  workflow_dispatch:
    inputs:
      url:
        description: 'Torrent file URL'
        required: true
jobs:
  download:
    runs-on: ubuntu-latest
    steps:
    


        - name: Maximize disk space
          if: inputs.maximize_disk_space
          uses: easimon/maximize-build-space@v6
          with:
            remove-dotnet: true
            remove-android: true
            remove-haskell: true
        
       
        - name: Write .env File
          run: |
              echo '${{ secrets.DOTENV }}' >> .env
          
        - name: Fixed permission
          run: sudo chown $USER /data
          
        - name: Dowload FIle
          run: npx webtorrent-cli "${{ github.event.inputs.url }}" -o /data  
      
        - name: LS
          run: cd /data && ls -la
          

        - uses: actions/checkout@master
        - name: rclone
          uses: wei/rclone@v1
          env:
            RCLONE_CONF: ${{ secrets.RCLONE_CONF }}
          with:
            args: sync /data zaindigithai:/

